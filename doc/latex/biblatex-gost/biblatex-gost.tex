% $Id: biblatex-gost.tex 136 2012-02-10 07:07:17Z ODomanov $
\documentclass[11pt,headings=small,numbers=enddot]{ltxdockit}[2011/03/25]
\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
%\usepackage{ucs}\usepackage[utf8x]{inputenc}% extended utf8 support
\usepackage{btxdockit}
%\usepackage[margin=2cm,left=4.5cm,bottom=3cm]{geometry}% use KOMA instead
\usepackage[english,russian]{babel}
\usepackage[strict]{csquotes}
\usepackage{tabularx}
\usepackage{longtable}
\usepackage{booktabs}
%\usepackage{shortvrb}
%\usepackage{pifont}%  ???
\usepackage{indentfirst}
%\usepackage{literat}
\usepackage{pscyr}
%\renewcommand{\rmdefault}{ftm}% times
\renewcommand{\rmdefault}{fha}% Балтика
\renewcommand{\sfdefault}{far}% arial
%\renewcommand{\sfdefault}{fma}% magazine~"--- too small

%\MakeAutoQuote{«}{»}
%\MakeAutoQuote*{<}{>}
%\MakeShortVerb{\|}

\usepackage{svn-multi}
\svnid{$Id: biblatex-gost.tex 136 2012-02-10 07:07:17Z ODomanov $}

\hypersetup{unicode=true}

\newcommand*{\biber}{Biber\xspace}
\newcommand*{\biblatex}{Biblatex\xspace}
\newcommand*{\biblatexhome}{http://sourceforge.net/projects/biblatex/}
\newcommand*{\biblatexctan}{http://www.ctan.org/tex-archive/macros/latex/contrib/biblatex/}
\newcommand*{\biblatexgost}{Biblatex-GOST\xspace}
\newcommand*{\biblatexgosthome}{http://sourceforge.net/projects/biblatex-gost/}

\titlepage{%
  title={Пакет \biblatexgost},
  subtitle={Оформление библиографии согласно ГОСТ 7.0.5-2008},
  url={\biblatexhome},
  author={Олег Доманов},
  email={odomanov@yandex.ru},
  revision={\svnrev},
  date={\svndate}}

\hypersetup{%
  pdftitle={The \biblatexgost Package},
  pdfsubject={Bibliography according to Russian standards (GOST 7.0.5-2008)},
  pdfauthor={Oleg Domanov},
  pdfkeywords={tex, latex, bibtex, bibliography, references, citation, gost, russian}}

% tables

\newcolumntype{H}{>{\sffamily\bfseries\spotcolor}l}
\newcolumntype{L}{>{\raggedright\let\\=\tabularnewline}p}
\newcolumntype{R}{>{\raggedleft\let\\=\tabularnewline}p}
\newcolumntype{C}{>{\centering\let\\=\tabularnewline}p}
\newcolumntype{V}{>{\raggedright\let\\=\tabularnewline\ttfamily}p}

\newcommand*{\sorttablesetup}{%
  \tablesetup
  \ttfamily
  \def\new{\makebox[1.25em][r]{\ensuremath\rightarrow}\,}%
  \def\alt{\par\makebox[1.25em][r]{\ensuremath\hookrightarrow}\,}%
  \def\note##1{\textrm{##1}}}

% markup and misc

\setcounter{secnumdepth}{4}

\hyphenation{%
}

\definecolor{reddish}{rgb}{0.6,0.2,0.2}
\newcommand*{\reddishcolor}{\color{reddish}}
%----- KOMA-script
%
\label{koma-defs}
\deffootnote[1.0em]{1.0em}{1.0em}{\makebox[0.7em][r]{\textsuperscript{\thefootnotemark}}~}
\addtokomafont{section}{\reddishcolor}
\addtokomafont{subsection}{\reddishcolor}
\renewcommand{\textfraction}{.5}
%-----
\usepackage{ellipsis}% must be loaded after hyperref !!
\newcommand{\bibsty}{\texttt}
\renewcommand*{\apxref}{\refs{прил.}{прил.}}
\renewcommand*{\Apxref}{\refs{Прил.}{Прил.}}
\renewcommand*{\tabref}{\refs{табл.}{табл.}}
\renewcommand*{\Tabref}{\refs{Табл.}{Табл.}}

\tolerance=9999

\newenvironment{bibexample}{\begin{list}{}{}}{\end{list}}

\begin{document}

\printtitlepage
\tableofcontents
\listoftables

\section{Введение}
\label{int}

Пакет \biblatex{}\fnurl{http://www.ctan.org/tex-archive/macros/latex/contrib/biblatex/} предоставляет мощные и удобные средства автоматизации библиографии. 
Пакет \biblatexgost{}\fnurl{http://sourceforge.net/projects/biblatex-gost/} представляет собой набор стилей для \biblatex и предназначен для 
оформления библиографии согласно ГОСТ 7.0.5-2008. Он основан на стандартных стилях 
\biblatex. Данная документация описывает отличия \biblatexgost как от \biblatex, так и 
от ГОСТ. 

\subsection{Установка}
\label{ssec:install}

Пакет поставляется в виде архива, содержащего стандартую структуру дерева TDS. 
Для его установки достаточно распаковать архив в дерево \TeX, желательно локальное, и 
обновить базу файлов (в \texttt{TeX Live} это делается командой \cmd{mktexlsr}).

\subsection{Использование}
\label{ssec:usage}

Работа со стилями \biblatexgost не отличается от работы с любыми другими стилями \biblatex. Например, в случае использования \sty{babel}:

\begin{lstlisting}[style=latex]
\documentclass{...}
\usepackage[french,latin,english,russian]{babel}
...
\usepackage[backend=biber,
  style=gost-footnote,
  language=auto,  %get main language from babel
  babel=other,
  ...
]{biblatex}
\addbibresource{biblatex-examples.bib}
...
\begin{document}

...\cite[123]{knuth:ct:a} ...

\printbibliography

\end{document}

\end{lstlisting}

Подробности см. в документации по \biblatex{}\fnurl{http://www.ctan.org/tex-archive/macros/latex/contrib/biblatex/doc/biblatex.pdf}. \xelatex
официально не поддерживается, поскольку \biblatex{ом} пока не поддерживается 
\sty{polyglossia}. Однако использование \sty{babel} совместно с \sty{xecyr}, 
похоже, ни к каким проблемам не ведёт.

Для работы с \biblatexgost рекомендуется использовать \biber.

\subsection{Лицензия}

Permission is granted to copy, distribute and\slash or modify this software under the terms of the \lppl, version 1.3.\fnurl{http://www.ctan.org/tex-archive/macros/latex/base/lppl.txt} This package is author"=maintained.


\section{Стили, определяемые \biblatexgost}

ГОСТ определяет три типа ссылок: внутритекстовая, подстрочная, затекстовая.
Первые два приблизительно соответствуют стилям \bibsty{verbose} в \biblatex 
с опцией \opt{autocite}, установленной, соответственно, в \opt{inline} и 
\opt{footnote}. Затекстовые ссылки могут быть двух типов, в зависимости от 
способа отсылки к библиографии (которая в этом случае располагается \enquote{за текстом} 
--- в 
конце статьи, главы, книги и пр.). В одном случае используются номера, в 
другом --- автор и год в квадратных скобках. В \biblatex им приблизительно 
соответствуют стили \bibsty{numeric} и \bibsty{authoryear}. В результате, 
стили \biblatexgost являются модификациями некоторых базовых стилей 
\biblatex. 

Более конкретно, \biblatexgost содержит следующие стили.

\begin{marglist}

\item[gost-inline]
Внутритекстовые ссылки по ГОСТ. Является модификацией стандартного стиля \bibsty{verbose-trad3}. Ссылки помещаются внутри текста в скобках. Стиль отслеживает
повторные ссылки, используя при необходимости короткие названия из поля
\bibfield{shorttitle}\footnote{Чтобы при использовании многоточий при сокращении
заголовков не возникали лишние точки после этих многоточий, используйте пакет
\sty{ellipsis} (он должен загружаться после пакета \sty{hyperref}). FIXME}.
Стиль устанавливает опцию \kvopt{autocite}{inline}.

Отсутствует опция \opt{dashed} (ПОЧЕМУ?).

\item[gost-footnote]
Подстрочные ссылки по ГОСТ. Является модификацией стандартного 
стиля \bibsty{verbose-trad3}. 
Стиль предназначен для помещения ссылок в сносках внизу страницы (с помощью 
команд \cmd{footcite}, \cmd{smartcite} или, ещё лучше, \cmd{autocite}). 

Фактически, стиль \bibsty{gost-footnote} имеет только два отличия от стиля 
\bibsty{gost-inline}. 
Во-первых, он устанавливает опцию \kvopt{autocite}{footnote}, что заставляет команду
\cmd{autocite} всегда выводить цитату в сноске 
(См. \secref{sec:citecommands}). Во-вторых, во внутритекстовой ссылке (но не 
в библиографии!) не выводятся, согласно требованиям ГОСТ, серия и сведения, относящиеся 
к заглавию (поле \bibfield{titleaddon}). Кроме того, не выводятся поля \bibfield{doi}, 
\bibfield{eprint}, \bibfield{url}, \bibfield{addendum}, \bibfield{pubstate}. 

\item[gost-numeric]
Затекстовые ссылки по ГОСТ. Является модификацией стандартного стиля \bibsty{numeric} и отличается от него лишь оформлением библиографии, но не цитат. Ссылки помещаются после текста, а для их связи с текстом используются числа в квадратных скобках.

\item[gost-authoryear]
Затекстовые ссылки по ГОСТ. Является модификацией стандартного 
стиля \bibsty{authoryear-icomp}. Ссылки помещаются после текста, и для их связи с текстом используются имя автора и год в квадратных скобках. Нужно заметить, что ГОСТ допускает в этом случае неопределённые ссылки, например, в случаях, когда один автор имеет несколько работ одного года. Поэтому в \biblatexgost используется стандартный для других библиографических стилей метод добавления в случае необходимости маленькой латинской буквы к году. Буква добавляется как в ссылке, так и в библиографии. См. файл примеров. Опция \opt{mergedate} имеет два дополнительных значения \opt{gostletter} и \opt{goststrict}. Первая соответствует добавлению буквы к году, вторая~"--- строгому следованию ГОСТу (с опасностью появления неопределённых ссылок). 

\end{marglist}

В ГОСТ определён ещё один тип затекстовых ссылок, при котором они связываются с текстом сносками. Этого можно достичь с помощью стиля \bibsty{gost-footnote} при наличии поддержки команды \cmd{endnote} (пакета \sty{endnotes}, стиля документа \sty{memoir} или других). При этом ссылки переносятся в конец текста (или главы, или в любое нужное место). Ещё один способ~"--- воспользоваться пакетом \sty{fn2end}.

\section{Описание многотомных изданий}
\label{sec:multivol}

ГОСТ определяет два способа библиографического описания отдельного тома многотомного издания:

\begin{bibexample}
\item Детская энциклопедия. В 5 т. Т. 2. Человек. \dots\ 
\item Человек. \dots\ (Детская энциклопедия: в 5 т., т. 2)\dots\ 
\end{bibexample}

В \biblatexgost реализован только первый вариант. Соответственно, в стиле \bibsty{gost-autoryear} при отсутствии автора ссылка производится на общий заголовок многотомного издания, а не на заголовок отдельного тома (тем более, что последний может и отсутствовать):

\begin{bibexample}
%\item{} [Детская энциклопедия, с.\,22]
\item{} [Детская энциклопедия, ч.\,2, с.\,33]
\end{bibexample}

\section{Соответствие терминов ГОСТ и \biblatexgost}
\label{sec:termsrel}

См. \tabref{tab:gost-biblatex}. Как можно видеть, соответствие неполное,
причём с обеих сторон.

%\begin{table}[ht]
\begingroup
\tablesetup
\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}[l]{@{}V{0.5\textwidth}@{}V{0.5\textwidth}@{}}
\toprule
\multicolumn{1}{@{}H}{ГОСТ} &
\multicolumn{1}{@{}H}{\biblatex\hfill}  \\
\cmidrule(r){1-1}\cmidrule{2-2}
\endhead
\bottomrule
\endfoot
\endlastfoot
\multicolumn{1}{@{}H}{Область заглавия и} & \\
\multicolumn{1}{@{}H}{сведений об ответственности} & \\
\cmidrule(r){1-1}
Основное заглавие                & \bibfield{title}, \bibfield{subtitle},
                 \bibfield{maintitle}, \bibfield{mainsubtitle}, \bibfield{booktitle}, \bibfield{booksubtitle}, \\
\textit{Общее обозначение материала}      & \textendash \\
\textit{Параллельное заглавие}            & \textendash \\
\textit{Сведения, относящиеся к заглавию} & \bibfield{titleaddon}, \bibfield{maintitleaddon}, \bibfield{booktitleaddon} \\
Сведения об ответственности      & \bibfield{editor}, \bibfield{editora},
                                   \bibfield{editorb}, \bibfield{editorc}, \bibfield{translator}, \bibfield{commentator}, ??? \\
\cmidrule(r){1-1}\cmidrule{2-2}
\multicolumn{1}{@{}H}{Область специфических сведений} & \bibfield{note} \\
\cmidrule(r){1-1}
\cmidrule(r){1-1}\cmidrule{2-2}
\multicolumn{1}{@{}H}{Область издания} & \\
\cmidrule(r){1-1}
Сведения об издании & \bibfield{edition} \\
\textit{Параллельные сведения об издании} & \textendash \\
\cmidrule(r){1-1}\cmidrule{2-2}
\multicolumn{1}{@{}H}{Область выходных данных} & \\
\cmidrule(r){1-1}
Место издания, распространения & \bibfield{location} \\
Имя издателя, распространителя и т.\,п. & \bibfield{publisher} \\
Дата издания, распространения и т.\,п. & \bibfield{date} \\
\cmidrule(r){1-1}\cmidrule{2-2}
\multicolumn{1}{@{}H}{Область физической характеристики} & \\
\cmidrule(r){1-1}
Специфическое обозначение материала и объём & \bibfield{volumes}, \bibfield{pagetotal}, \bibfield{pages}\\
\textit{Другие сведения о физической характеристике} & \textendash \\
\textit{Размеры} & \textendash \\
\textit{Сведения о сопроводительном материале} & \textendash \\
\cmidrule(r){1-1}\cmidrule{2-2}
\multicolumn{1}{@{}H}{Область серии} & \\
\cmidrule(r){1-1}
Основное заглавие серии или подсерии & \bibfield{series} \\
\textit{Параллельное заглавие серии или подсерии} & \textendash \\
\textit{Сведения, относящиеся к заглавию серии или подсерии} & \textendash \\
Сведения об ответственности, относящиеся к заглавию серии или подсерии & \textendash \\
ISSN серии или подсерии & \textendash \\
\cmidrule(r){1-1}\cmidrule{2-2}
\multicolumn{1}{@{}H}{Область примечания} & \\
\cmidrule(r){1-1}
\cmidrule(r){1-1}\cmidrule{2-2}
\multicolumn{1}{@{}H}{Область стандартного номера и} & \\
\multicolumn{1}{@{}H}{условий доступности} & \\
\cmidrule(r){1-1}
Стандартный номер (или его альтернатива) & \\
Ключевое заглавие & \textendash \\
Условия доступности и (или) цена & \textendash \\
Дополнительные сведения к элементам области & \textendash \\
\bottomrule
\caption{Соответствие терминов ГОСТ и \biblatex\label{tab:gost-biblatex}}\\
\end{longtable}
%\end{table}
\endgroup

\section{Отличия от ГОСТ}
\label{sec:gost-diff}

Отличия \biblatexgost от ГОСТ обусловлены тремя обстоятельствами.
1)~Что-то нужно оставить и на будущее. 2)~ГОСТ несовершенен. В некоторых
случаях, он допускает двусмысленность в ссылках. 3)~\biblatex несовершенен.
Некоторые требования ГОСТ не могут быть реализованы без внесения изменений в
ядро \biblatex'а. Тем не менее, самые существенные требования ГОСТ соблюдены, и
пакет, я надеюсь, уже в таком виде может быть полезен.

\biblatexgost не во всём следует ГОСТ. Некоторые свойства более удачно
реализованы средствами \biblatex, и было бы странно затрачивать усилия на то,
чтобы эту реализацию ухудшить в угоду строгого соблюдения ГОСТ. Ниже перечислены
все такие случаи.

\begin{itemize}

\item Нет параллельного заглавия.

\item В качестве многоточия в сокращённых заголовках рекомендуется использовать
%знак \enquote{…} (Unicode U+2026), окружённый двумя пробелами, как предписывает
%ГОСТ. 
команду \cmd{bibellipsis}, хотя это и не совпадает с предписаниями ГОСТ. К
сожалению,
как \cmd{textellipsis}, так и символ \enquote{…} (Unicode U+2026)
конфликтуют с трекером пунктуации (который, например, добавляет лишнюю точку). 
%\ldots в xelatex выводит единственный глиф Unicode U+2026 !!
Например:

\begin{lstlisting}[style=bibtex,extendedchars=true]
@BOOK{book,
  ...
  shorttitle = {Introduction\addnbspace\bibellipsis}
}
\end{lstlisting}

Результат: 

\begin{bibexample}
\item {[Introduction [\textellipsis], p. 12]}
\end{bibexample}



\end{itemize}

См. также ~\secref{sec:todo}.

\section{Команды цитирования}
\label{sec:citecommands}

Команды перечислены в \tabref{tab:citecommands}. Цветом выделены команды, поведение которых отличается от стандартного в \biblatex.

%\begin{table}[t]
\begingroup
\tablesetup
%\setlength\LTleft{0pt}
%\setlength\LTright{0pt}
\begin{longtable}[l]{%
    @{}V{0.25\textwidth}%
    @{}V{0.25\textwidth}%
    @{}V{0.5\textwidth}@{}}
\toprule
\multicolumn{1}{@{}H}{Стиль} &
\multicolumn{1}{@{}H}{Команда} &
\multicolumn{1}{@{}H}{Вывод\hfill} \\
%{\spotcolor Стиль} &
%{\spotcolor Команда} &
%{\spotcolor Вывод}  \endhead
\cmidrule(r){1-1}\cmidrule(r){2-2}\cmidrule{3-3}
\endhead
\bottomrule
\endfoot
\endlastfoot
\bibsty{gost-inline} & \cmd{cite} & Только цитата в тексте без скобок \\
  & \cmd{parencite} & Цитата в тексте в круглых скобках \\
  & \cmd{footcite} & Цитата в сноске без скобок\\
  & \cmd{footcitetext} & То же, но используется \cmd{footnotetext} вместо \cmd{footnote} \\
  & \cmd{smartcite} & \cmd{footcite} в тексте, \cmd{parencite} в сноске. Другими словами, цитата всегда оказывается в сноске, но в первом случае в круглых скобках, во втором~"--- без них\\
  & \cmd{autocite} & Совпадает с \cmd{parencite} (установлена опция \kvopt{autocite}{inline})\\
\cmidrule(r){1-1}\cmidrule(r){2-2}\cmidrule{3-3}
\bibsty{gost-footnote} & \cmd{cite} & Только цитата в тексте без скобок \\
  & \cmd{parencite} & Цитата в тексте в круглых скобках \\
  & \cmd{footcite} & Цитата в сноске без скобок\\
  & \cmd{footcitetext} & То же, но используется \cmd{footnotetext} вместо \cmd{footnote} \\
  & \cmd{smartcite} & \cmd{footcite} в тексте, \cmd{parencite} в сноске. Другими словами, цитата всегда оказывается в сноске, но в первом случае в круглых скобках, во втором~"--- без них\\
  & \cmd{autocite} & Совпадает с \cmd{footcite} (установлена опция \kvopt{autocite}{footnote})\\
\cmidrule(r){1-1}\cmidrule(r){2-2}\cmidrule{3-3}
\bibsty{gost-numeric} & \cmd{cite} & Только цитата, без скобок \\
  & \cmd{parencite} & Цитата в квадратных скобках \\
  & \cmd{footcite} & Цитата в сноске без скобок \\
  & \cmd{footcitetext} & То же, но используется \cmd{footnotetext} вместо \cmd{footnote} \\
  & \cmd{smartcite} & \cmd{footcite} в тексте, \cmd{parencite} в сноске. Другими словами, цитата всегда оказывается в сноске, но в первом случае в квадратных скобках, во втором~"--- без них.\\
  & \cmd{textcite} & Цитата в тексте без скобок \\
  & \cmd{supercite} & ? \\
  & \cmd{autocite} & Совпадает с \cmd{parencite} (установлена опция \kvopt{autocite}{inline})\\
\cmidrule(r){1-1}\cmidrule(r){2-2}\cmidrule{3-3}
\bibsty{gost-authoryear} & \cmd{cite} & Только цитата в тексте без скобок \\
  & \cmd{cite*} & Часть цитаты без автора или заголовка в тексте без скобок \\
  & \cmd{parencite} & Цитата в тексте в квадратных скобках \\
  & \cmd{parencite*} & Часть цитаты без автора или заголовка в тексте в квадратных скобках \\
  & \cmd{footcite} & Если используется в тексте~"--- цитата в сноске без скобок, если в сноске~"--- цитата в квадратных скобках. Поскольку \biblatex следит за отсутствием вложенных сносок, то эта команда эквивалентна \cmd{smartcite} \\
  & \cmd{footcitetext} & То же, но используется \cmd{footnotetext} вместо \cmd{footnote} \\
  & \cmd{smartcite} & Если используется в тексте~"--- цитата в сноске без скобок, если в сноске~"--- цитата в квадратных скобках \\
  & \cmd{textcite} & Имя/заголовок без скобок и затем оставшаяся часть цитаты в квадратных скобках \\
  & \cmd{autocite} & Совпадает с \cmd{parencite} (установлена опция \kvopt{autocite}{inline})\\
\bottomrule
\caption{Поддерживаемые команды цитирования\label{tab:citecommands}}\\
\end{longtable}
\endgroup
%\end{table}

Кроме перечисленных поддерживаются производные команды, описанные в 
 руководстве \biblatex, такие как \cmd{Cite}, \cmd{Parencite}, \dots\ \cmd{Cites}, 
\cmd{Footcites}, \dots\ \cmd{volcite}, \cmd{volcites} и т.\,д. 

Хотя команды \cmd{textcite} и \cmd{textcites} в стилях \bibsty{gost-inline},
 \bibsty{gost-footnote} и \bibsty{gost-authoryear} вряд ли найдут применение
в русском тексте, они оставлены для полноты.

В целом, рекомендуется пользоваться очень полезной командой \cmd{autocite}.

\section{Особенности заполнения базы данных}

\subsection{Поля}

Имена в полях \bibfield{editor}, \bibfield{editora}, \bibfield{editorb}, \bibfield{editorc}, \bibfield{commentator}, \bibfield{translator}, \bibfield{afterword},... должны быть в родительном падеже: 
\enquote{Под ред. \prm{кого} А.\,Петрова}, \enquote{Пер. с фр. \prm{кого} И.\,Иванова}.

\begin{fieldlist}

\fielditem{credits}{literal}

Новое поле, см.~\secref{sec:biber}. Содержит организацию, выводимую 
в сведениях об ответственности.  Например:

\begin{bibexample}
\item \textellipsis\ \slash\ Академия наук СССР\ ;\ \textellipsis
\end{bibexample}

FIX: Возможно, лучше сделать editortype = organization ?

\fielditem{books}{literal}

Новое поле, см.~\secref{sec:biber}. Содержит количество книг многочастного издания, если оно делится на книги.

\fielditem{parts}{literal}

Новое поле, см.~\secref{sec:biber}. Содержит количество частей многочастного издания, если оно делится на части.

\fielditem{issues}{literal}

Новое поле, см.~\secref{sec:biber}. Содержит количество выпусков многочастного издания, если оно делится на выпуски.

\fielditem{issue}{literal}

Выпуск. Для книг это значение целое число и выводится в форме «Вып. N». Для журналов и 
другой периодики может быть литералом (например, Summer, Autumn и т.д.).
 См.~\secref{sec:serinjour}.

\fielditem{edition}{literal}

Сведения об издании. Если целое число, то выводится в виде «5-е изд.». Если литерал, выводится как есть.

\fielditem{series}{literal}

Для периодических изданий, таких как журналы, сначала проверяется, является ли поле числом. Если да, то выводится в виде «N-я сер.». В противном случае, выводится как есть. См. также \secref{sec:serinjour}.
% Другими словами, в литерале слово «Серия» должно присутствовать. 
%Например: «Серия геологическая», «Серия 4, Библиографии», «Серия: Философия» и т.\,д.


\listitem{afterword}{name}

Имя автора послесловия. Должно быть в родительном падеже.

\listitem{foreword}{name}

Имя автора предисловия. Должно быть в родительном падеже.

\listitem{commentator}{name}

Имя автора комментариев. Должно быть в родительном падеже.

\end{fieldlist}

\subsection[@periodical, @mvbook и сериальные
издания]{\bibtype{periodical}, \bibtype{mvbook} и сериальные издания}

В ГОСТ различаются (6.3.4.2) сериальные документы с нумерацией по годам (как, например, в журналах) и со сквозной нумерацией. В первом случае не печатается дата на месте выходных данных. В \biblatexgost только такие документы соответствуют \bibtype{periodical}.  Сериальные документы со сквозной нумерацией рекомендуется оформлять как \bibtype{mvbook}. 

\subsection{Серия в журналах}
\label{sec:serinjour}

Серия в журналах может пониматься в двух смыслах. Во-первых, она употребляется в
том же смысле, что и для книг, и также выводится в области серии в виде:

\begin{bibexample}
\item \textellipsis~"--- (Заголовок 78).~"--- \textellipsis
\end{bibexample}

При заполнении базы данных, эта серия помещается в поле \bibfield{series}.

Во-вторых, серия может входить в заглавие журнала: 

\begin{bibexample}
\item Известия Российской академии наук. Серия геологическая
\item Труды исторического факультета МГУ. Серия 4, Библиографии
\item Указатели по актуальным проблемам радиоэлектроники. Серия ВТ-МП,
Микропроцессоры
\item Вестник Ивановского государственного университета. Серия «Химия, биология»
\item Итоги науки и техники. Серия: Автомобилестроение
\end{bibexample}

При заполнении базы данных, эта серия помещается в поле \bibfield{journaltitle}
вместе с названием журнала:

%\begin{lstlisting}[style=bibtex,extendedchars=true]
\medskip\noindent
\texttt{\small journaltitle = \{Итоги науки и техники. Серия: Автомобилестроение\}}
\medskip
%\end{lstlisting}

\subsection{Преобразование программой \biber}
\label{sec:biber}

\biblatex (до версии 2.x) не позволяет вводить новые поля библиографической базы данных.
В то же время пакет \biblatexgost использует дополнительные поля для хранения количества 
книг, частей, выпусков многочастных изданий, а также название организации в сведениях об ответственности. Здесь можно поступать двумя способами. 

Во-первых, можно использовать запасные поля \biblatex \bibfield{user[a-f]}, 
\bibfield{list[a-f]}, \bibfield{custom[a-f]} (см. п. ??? руководства \biblatex). Для 
четырёх перечисленных параметров \biblatexgost использует, соответственно, поля 
\bibfield{userb}, \bibfield{userc}, \bibfield{userd} и \bibfield{lista}. 

Но можно поступить иначе, использовав способность программы \biber подменять поля 
\enquote{на лету}. Тогда база данных будет содержать более осмысленные названия полей, 
которые преобразуются программой \biber в запасные поля, понимаемые \biblatex.
Соответствие между полями в файле \file{.bib} и полями \biblatex показано в таблице
%\tabref{tab:biber}.

\begin{table}
%\begingroup
%\medskip
\tablesetup
\centering
\begin{tabularx}{.5\textwidth}{@{}p{8em}@{}X@{}}
\toprule
\multicolumn{1}{@{}H}{Поле в базе \file{.bib}} &
\multicolumn{1}{@{}H}{Поле \biblatex}  \\
\cmidrule(r){1-1}\cmidrule{2-2}
\bibfield{books} & \bibfield{userb} \\
\bibfield{parts} & \bibfield{userc} \\
\bibfield{issues} & \bibfield{userd} \\
\bibfield{credits} & \bibfield{lista} \\
\bottomrule
\end{tabularx}
\caption{Соответствие полей файла \file{.bib} и \biblatex}
\label{tab:biber}
\end{table}
%\medskip
%\endgroup

Чтобы воспользоваться этими заменами, нужно настроить \biber. Для этого нужно изменить 
его файл конфигурации \file{biber.conf}. В простейшем случае, он
 может выглядеть следующим образом:

\begin{lstlisting}[language=XML,basicstyle=\footnotesize\verbatimfont]
<?xml version="1.0" encoding="UTF-8"?>
<config>
<sourcemap>
  <maps datatype="bibtex" map_overwrite="0">
    <map>
      <map_step map_field_source="BOOKS" map_field_target="USERB"/>
      <map_step map_field_source="PARTS" map_field_target="USERC"/>
      <map_step map_field_source="ISSUES" map_field_target="USERD"/>
      <map_step map_field_source="CREDITS" map_field_target="LISTA"/>
    </map>
  </maps>
</sourcemap>
</config>
\end{lstlisting}

Будем надеяться, что это временное решение.


\section{Отличия от стандартных стилей \biblatex}

\subsection{Тома, книги, части, выпуски}

Издание может делиться на физически отдельные части, которые могут называться по-разному. \biblatexgost поддерживает деление на тома, книги, части, выпуски (деление только одного уровня; например, тома, разделённые на части, не поддерживаются). Им соответствуют следующие поля базы данных.

\begin{trivlist}
\item[тома:] \bibfield{volume}, \bibfield{volumes}
\item[книги:] \bibfield{book}, \bibfield{books}
\item[части:] \bibfield{part}, \bibfield{parts}
\item[выпуски:] \bibfield{issue}\footnote{Поле \bibfield{issue} имеет особое значение в случае журналов. См. п. ??? руководства по \biblatex.}, \bibfield{issues}
\end{trivlist}

Если эти поля являются целыми числами, то они выводятся в виде \enquote{В 5 т.},
\enquote{В 4 ч.} и т.\,д. В противном случае, выводятся как есть: \enquote{В
5-и томах (6-и кн.)} и т.\,д.

\subsection{Даты в газетах и журналах}

Информация о дате в публикациях типа \bibtype{article} выводится в следующем порядке:

\begin{bibexample}
\item\textellipsis\ \prm{year}.~"--- \prm{day} \prm{month}.~"--- \prm{volume}, \prm{issue}, \prm{number}.~"--- \textellipsis
\end{bibexample}

Таким образом, для газет получается: 

\begin{bibexample}
\item\textellipsis\ 2001.~"--- 25 мая.~"--- \textellipsis
\end{bibexample}

И для журналов: 

\begin{bibexample}
\item\textellipsis\ 2001.~"--- №~1.~"--- \textellipsis
\item\textellipsis\ 2001.~"--- Т.~17.~"--- \textellipsis
\item\textellipsis\ 2001.~"--- Vol.~34, Summer, No.2.~"--- \textellipsis
\item\textellipsis\ 2001.~"--- July.~"--- Vol.~34.~"--- \textellipsis
\end{bibexample}


\subsection{Сортировка}

Определена новая схема сортировки ntvy~--- Имя, название, том, год (не проверена).


%\subsection{Типы публикаций}


\section{Опции}
\label{sec:opt}

Для всех стилей сохранены опции стандартных стилей \biblatex, от которых они происходят, даже если соответствующая функциональность не предполагается ГОСТом. Кроме этого, пакет \sty{biblatex-gost} имеет дополнительные опции...

\begin{optionlist}

\optitem[gostletter]{mergedate}{\prm{опции \biblatex}, \opt{goststrict}, \opt{gostletter}}

Стиль \bibsty{gost-authoryear}, по сравнению со стандартным \bibsty{authoryear}, имеет два дополнительных значения опции \opt{mergedate}:
 
\begin{valuelist}

\item[gostletter]

Отключает в библиографии вывод года после автора (точнее, после \bibfield{label}). Для предотвращения неопределённых ссылок (например, при совпадении автора и года) к году при необходимости добавляется латинская буква. Эта функциональность не предусмотрена ГОСТом.

\item[goststrict]

Отключает в библиографии вывод года после автора (точнее, после \bibfield{label}). В 
отличие от предыдущей опции, никаких знаков к году не добавляется, что может приводить к 
неопределённым ссылкам, но зато точно соответствует требованиям ГОСТ.

\end{valuelist}


%\valitem[numeric]{style}{file}
%
%Опция переключает ... \bin{biblatex}


\end{optionlist}

%\subsection{Опции стилей}
%
%\subsubsection{\bibsty{gost-footnote}}
%
%\begin{optionlist}
% 
%\boolitem[false]{seenote}
%Эта опция переключает вывод сообщений вида \enquote{см. сн. 3}, указывающих на сноску, 
%содержащую полную ссылку, в неполных ссылках. По умолчанию, сообщения не выводятся, 
%поскольку они не предусмотрены ГОСТом.
%
%\end{optionlist}

\subsection{Опции, установленные по умолчанию}

\kvopt{maxnames}{3}, \kvopt{minnames}{3}, 
\kvopt{useeditor}{false}, \kvopt{usetranslator}{false}, \kvopt{dashed}{false}, 
\kvopt{sorting}{ntvy}, \kvopt{mergedate}{gostletter}, ...

\subsection{Другие отличия}

\begin{itemize}

\item Добавлен тип редактора \bibfield{editortype}=\bibfield{geneditor}, соответствующий общему редактору: \enquote{Под общ. ред.}.

\end{itemize}

\section{Детали реализации}

\begin{itemize}
\item Определен макрос \cmd{ifmulticite}, принимающий значение \texttt{True} внутри команд \cmd{...cites} (комплексных ссылок, в терминологии ГОСТ).

\item Пакет загружает дополнительный файл локализации
\linebreak\file{russian-gost.lbx}. В него добавлены строки \bibfield{books}, \bibfield{parts}, \bibfield{issues} для книг, частей, выпусков. ...

\end{itemize}


\section{TODO}
\label{sec:todo}

\begin{itemize}
\item сортировка многот.книг по номеру тома (или году?)
\item электронные документы ([Электронный ресурс], систем. требования,\textellipsis)
\item комплексные ссылки: ... // Там же.~"--- требует проверки crossref
\item комплексные ссылки: ... // Её же., Его же,...~--- требует указания рода в БД
\item для 4 и более авторов: Заголовок / Ю.М. Липницкий [и др.].
\item оформление стандартов
\item оформление патентов (поля: заявлено, опубликовано, приоритет,...)
\item authoryear: мал.буква после ... в shorttitle
\item многоточие в shorttitle: либо \enquote{~... , с.}, либо \enquote{~... С.}~--- плохо работает
\item опция для двух способов представления тома многотомного издания (соответственно, изменяется labeltitle)
\item свед.о материале~"--- возможно, добавить в biber.conf
\item При составлении описания на документ в целом, если он продолжает публиковаться, приводят год издания первого номера и тире, после которого оставляют \textit{интервал в четыре пробела}: 

Долгопрудный : МФТИ, 1998~"--- \mbox{\ \ \ \ }.
\item серий может быть несколько~"--- выводятся друг за другом~"--- д.б. list?
\item Одно произведение в нескольких номерах журнала
\item Область специф.свед.?
\end{itemize}


\end{document}
